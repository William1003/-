import json
import requests
from requests_html import HTMLSession
from selenium import webdriver

browser = webdriver.Chrome()
json_file_name = 'data/test_id_slug.json'
with open(json_file_name, 'r') as f:
    id_slug_dict = json.load(f)
headers = {
    'cookie': 'adsk_ccpa_guid=814229da-6cd0-4623-9775-8829df8f88f8; OPTOUTMULTI_REF=f74cdea6-5e9c-4e93-b4af-09dd1c41c690; OPTOUTMULTI_TYPE=P; _cs_c=1; s_ecid=MCMID|60531758190183886764242739456195341110; WRUIDCD20200731=3380776889074615; _mkto_trk=id:918-FOD-433&token:_mch-autodesk.com-1626416748658-91829; __qca=P0-1603605256-1626416728722; _fbp=fb.1.1626416749227.2102680332; s_fid=65E045774988C4B2-3BF39E5DA4A183B1; userty.core.p.8317ef=__2VySWQiOiI1ZDExZWI1NjU5M2MwNmQxMzc5ZjdmZWExYTA5MDZhMyJ9eyJ1c; _ga=GA1.2.1833606427.1626855912; adsk_top_plc=1_fusion-360|; _uetvid=686ca8c0e5fe11ebbbcdcb8b90da8b5c; _cs_id=6deba64d-c6fa-a26a-9abb-9239fbabbb46.1626416641.6.1627538798.1627538421.1617524517.1660580641477.Lax.0; __CT_Data=gpv=12&ckp=cd&dm=autodesk.com&apv_60_www33=13&cpv_60_www33=12&rpv_60_www33=12; neon_lng=zh-Hans; _ga=GA1.3.1833606427.1626855912; mbox=PC#c1d0427f935c4c99998eca29e036d007.32_0#1702632140|session#c0441c2f98f747c489d4b4630a45489a#1639389200; AMCVS_6DC7655351E5696B0A490D44@AdobeOrg=1; _sp_id.cd78=d7e79339-0684-47cc-b097-7ebb4343739d.1626416641.84.1641288011.1639387650.bab411f4-546b-4a0e-8c13-73b3de71ee8b; cl-token=Skdo/BMVqlSxIxBqizA9BJoMHrilWCDrv6QgXqK4L3LvGP8GRc+kGg5kszpq5E6GSkwpCV68M1RPljMAZkDOEw==; cl-flags=cl-kmsi-enabled:1|cl-token-enabled:1; identity-sso=GP54JWJ8DHUU; s_dlv=1641288025943; s_vnum=1657952726605&vn=61; AMCV_6DC7655351E5696B0A490D44@AdobeOrg=1585540135|MCIDTS|18997|MCMID|60531758190183886764242739456195341110|MCAID|NONE|MCOPTOUT-1641295226s|NONE|MCAAMLH-1641892826|11|MCAAMB-1641892826|j8Odv6LonN4r3an7LhD3WZrU1bUpAkFkkiY1ncBR96t2PTI|MCSYNCSOP|411-18976|vVersion|4.4.0|MCCIDH|-1968766871; s_cc=true; gallery_sso_synergy=72c0943e-b917-4fca-a142-6d3c34963d9a; gallery_fe_session=8221da89e17b5f645e5b448a52d70f43; _gid=GA1.2.433562483.1641288105; _gid=GA1.3.433562483.1641288105; _gat=1; _gat_UA-7938776-36=1; AKN_UP_micro-prd=R1A1NEpXSjhESFVVOmE4NjZjOWZjNTYwNGIwYTRkNTI1ODliZDIzYTZmYzhj; AWSALB=d5yyMLT7lNBf6t26QtIE2PY0sq/HINb4HF9FxSwBb5mBDUHx2LFP9YXbUp8eCBeH521ganBri3WoXH8ztK/9vNm0W/gYqMgoyEpC+7r53ujnkuLn1vGCamTaVl4V; AWSALBCORS=d5yyMLT7lNBf6t26QtIE2PY0sq/HINb4HF9FxSwBb5mBDUHx2LFP9YXbUp8eCBeH521ganBri3WoXH8ztK/9vNm0W/gYqMgoyEpC+7r53ujnkuLn1vGCamTaVl4V; _exchange_gallery_session=UW5YeDFiVWZ0azlKZ3VCVlpQajNVY0NEbXNuYWY3M0REZ0pUZWxsRWpSVHVwcmhRUXlDb3JVOWdNSlV2RWZqTFdSQ2JlWVN5dHJYbWpab3gzYTNGZWZmYTR6L0w3SnNvSG5nQmtCejhpR0FIcHA0YmlpbGFTMXNhL2VLS0I0a2NnaWNkVzhCYVV2TExZc0xxaFp2WTNTSUNLenNQUE9kUzN4ZjdUeXFvODFYcHE3UUZIdktPbVBHbGFrN2xRZWxRZHZ4SWM4RDlDamNSbUU4YmY5QS93RjU0RXZmRGM5WjZoeHduSHQxczYxdEF5ZVBDeTNha1NaWTVTaGdtNExKYU53VGZ5N1BhSFVjdmF5SkFGbFRiNGR2Tlhzd1J2eFEwaHpReTFBQ2NFQWN2VnJzZ2pCNGc2Q290RTdsS1NEdnZXa0c0VzY2VDRqTW1idy92MHV4Y2RhZE5ramdla3BKU2lMblNadnJxYkRHeHhUc3JqbTlRaHFqcm5QT2d2Tnk4UHFyMS9yR2ZqN3MzdVVlTVNRU3pyN3gxd3pOcVF6dVNHMTJPWkJCZzhtTlNZRjV0MTFUZlhXWXhVOVJTL2E1WHpleTZ1Z3VPS3FpRFYxbXVlMjAxQ1FvdDdtY2pyOFdHUWpwSHBLSSszSkhsNCtjTEVPclVOcG4yd2c4ZklKS3lCSythY1Q5VFUrdEVTK0JDNC81c1Y4bVlZYzc5TW1zbCtzS0ZyYjF3RGFNaWk5WlQ5Z3dxaCs4TE1TTjdBTnAwSC9wdWZFN1B5Q2w5cFFuSjhQVldhckl4djlVRyt3eEw2Um93aFZ1V1B4TUJqcm5XL09zaEZUOVlzSk1YYU1wWmZadzRpdmNXY0lHSkpTMGJvR0NHOEoyYUNuMUlVM3JrbW8zNnJxOTZaZW9ZY3JhSGE5dXAzZ1VvUWpvM0dxN3J2RFZpUU1PTmFMa3U3eUhjVk1zU2luTjNkamZRYWJYUkIwVDRVOVBiaityNlRGRGlnbGNmbGpDVXBINDFHeDh0N3FOS2ExUDM4REtobFdtS1RDSUlzN3Nic0hxWFI0dm5IZGxVY1ZGdkhMUTFINFZqRzRrMGFGc1ZVOEtXWmpZYVcweUdCNDlBMEJRSDZaK0VObWYybHN3QURLZU1kWTdZNUxIWHhnQmtLaU1zd3FOMnRGL2Q4OElsR0k5anJPdEowSTg1a1l6MXplMjZHbjMvUHZNNFV3PT0tLTdaeTVGdmhveml1VVZlTkdDaUJCVFE9PQ==--fff759e95a30ef72d18ead81d5915ceef83dd030; OPTOUTMULTI=0:0|c9:0|c1:0|c8:0|c7:0; ADSK_GDPR_OPT_LENGTH=Fri, 04 Feb 2022 06:43:32 GMT; utag_main=v_id:017aadedf45e00024c99b2febc0d03083005b07b00bd0$_sn:53$_ss:0$_st:1641366812695$vapi_domain:autodesk.com$optoutbackup:undefined;exp-1642061579703$ses_id:1641364991182;exp-session$_pn:2;exp-session'
}
for key, value in id_slug_dict.items():
    page_url = 'https://gallery.autodesk.com/projects/' + key + '/' + value + '?searched='

    browser.get(page_url)
    cookie = {'name': '_exchange_gallery_session',
        'value': 'neon_lng=zh-Hans; OPTOUTMULTI_REF=8dd58207-b4f2-4e6c-a9c8-a5caf2c49fe3; OPTOUTMULTI_TYPE=P; AMCVS_6DC7655351E5696B0A490D44@AdobeOrg=1; _sp_id.cd78=a9904000-91ef-4549-8c0b-a5e63f591e00.1641366539.1.1641366539.1641366539.1fd168ef-bf3c-4a80-9176-b22b038eaf32; _sp_ses.cd78=*; s_ecid=MCMID|26455643364368153893179751514984032531; cl-token=Skdo/BMVqlSxIxBqizA9BJoMHrilWCDrv6QgXqK4L3JCThUzOBF4lmDqM/ry5U/Ukk6VPHobCFiujBv7Z4VnoA==; cl-flags=cl-kmsi-enabled:1|cl-token-enabled:1; identity-sso=GP54JWJ8DHUU; s_dfa=autodesk-new-gl; s_dlv=1641366554057; s_dlv_s=First Visit; s_vnum=1672902554057&vn=1; s_invisit=true; AMCV_6DC7655351E5696B0A490D44@AdobeOrg=1585540135|MCIDTS|18998|vVersion|4.4.0|MCMID|26455643364368153893179751514984032531|MCAAMLH-1641971354|11|MCAAMB-1641971354|RKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y|MCOPTOUT-1641373754s|NONE|MCAID|NONE|MCSYNCSOP|411-19005|MCCIDH|-1968766871; s_cc=true; gallery_sso_synergy=c41bef74-e957-4883-868f-59e23457cdb7; AKN_UP_micro-prd=R1A1NEpXSjhESFVVOjFiMmNmOTk1N2IxZTk0ZjllMGIxNTMyMGVkYzhjZWQ4; ADSK_GDPR_OPT_LENGTH=Fri, 04 Feb 2022 07:09:31 GMT; OPTOUTMULTI=0:0|c9:0|c1:0|c8:0|c7:0; utag_main=v_id:017e290951d3001880c1fa8514db05073005006b00bd0$_sn:1$_ss:0$_st:1641368390358$ses_id:1641365983700;exp-session$_pn:6;exp-session$optoutbackup:undefined;exp-1649141985506$vapi_domain:autodesk.com'}
    browser.add_cookie(cookie_dict=cookie)
    browser.get(page_url)
    li = browser.find_element_by_class_name('file-item')
    print(li.text)
    # session = HTMLSession()
    # respond = session.get(page_url, headers=headers)
    # print(respond.html.render())
    # session.close()
    break
